<!DOCTYPE html>
<html>

<head>
  <meta charset="UTF-8">
  <title>Trivia</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
  <meta http-equiv="x-ua-compatible" content="ie=edge">
  <link rel="stylesheet" type="text/css" href="assets/css/style.css">
  <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Piedra" rel="stylesheet">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.7.0/css/font-awesome.min.css">

</head>


<body>

  <!-- Background -->

  <div class="video-container">
    <video autoplay loop>
                    <source src="https://mdbootstrap.com/img/video/Tropical.mp4" type="video/mp4" class="vid" />
                </video>
  </div>




  <div class="jumbotron">
    <div class="container">
      <div class="row">
        <h1 class="text-center">Drink Game</h1>
      <div class="mainArea col-xs-12 col-sm-10 col-sm-offset-1 col-md-8 col-md-offset-2">
          </div>
        </div>
      </div>
    </div>
  </div>






  <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>
  <script type="text/javascript" src="assets/javascript/app.js"></script>
  <script>




  var startScreen;
  var gameHTML;
  var counter = 30;
  var questionArray = ["Which beer has the highest alcohol content?", "Which one is the mexican beer?", "What is the primary ingredient for a margarita?", "Highest proof liquor?", "What is the capital of China?", "What is the capital of Turkey?", "What is the capital of Colombia?", "What is the capital of India?"];
  var answerArray = [["Sam Adams Utopias", "BrewDog Tactical Nuclear Penguin", "Struise Black Damnation VI", "Schorschbräu Schorschbock"], ["Bud Light", "Hofbräuhaus", "Grolsch", "Pacifico"], ["Vodka", "Rum", "Tequila", "Whisky"], ["Bruichladdich X4 Quadrupled Whisky"," Everclear","Spirytus","Balkan Vodka "], ["Hong Kong", "Macau", "Shanghai", "Beijing"], ["Ankara","Istanbul","Antalya","Bursa"], ["Medellin", "Bogota", "Cartagena", "Cali"], ["Mumbai","Hyderabad","Bangalore","New Delhi"]];

  var correctAnswers = ["D. Schorschbräu Schorschbock", "D. Pacifico", "C. Tequila", "C. Spirytus", "D. Beijing", "A. Ankara", "B. Bogota", "D. New Delhi"];
  var questionCounter = 0;
  var selecterAnswer;
  var theClock;
  var correctTally = 0;
  var incorrectTally = 0;
  var unansweredTally = 0;




  $(document).ready(function() {
  // Create a function that creates the start button and initial screen

  function initialScreen() {
  	startScreen = "<p class='text-center main-button-container'><a class='btn btn-warning btn-lg btn-block start-button' href='#' role='button'>Start Quiz</a></p>";
  	$(".mainArea").html(startScreen);
  }

  initialScreen();

  //Create a function, generateHTML(), that is triggered by the start button, and generates the HTML seen on the project video...

  $("body").on("click", ".start-button", function(event){
  	event.preventDefault();  // added line to test issue on GitHub Viewer

  	generateHTML();

  	timerWrapper();

  }); // Closes start-button click

  $("body").on("click", ".answer", function(event){
  	//answeredQuestion = true;

  	selectedAnswer = $(this).text();
  	if(selectedAnswer === correctAnswers[questionCounter]) {
  		//alert("correct");

  		clearInterval(theClock);
  		generateWin();
  	}
  	else {
  		//alert("wrong answer!");
  		clearInterval(theClock);
  		generateLoss();
  	}
  }); // Close .answer click

  $("body").on("click", ".reset-button", function(event){

  	resetGame();
  }); // Closes reset-button click

  });  //  Closes jQuery wrapper

  function generateLossDueToTimeOut() {
  	unansweredTally++;
  	gameHTML = "<p class='text-center timer-p'>Time Remaining: <span class='timer'>" + counter + "</span></p>" + "<p class='text-center'>You ran out of time!  The correct answer was: " + correctAnswers[questionCounter] + "</p>"
  	$(".mainArea").html(gameHTML);
  	setTimeout(wait, 4000);  //  change to 4000 or other amount
  }

  function generateWin() {
  	correctTally++;
  	gameHTML = "<p class='text-center timer-p'>Time Remaining: <span class='timer'>" + counter + "</span></p>" + "<p class='text-center'>Correct! The answer is: " + correctAnswers[questionCounter] + "</p>"
  	$(".mainArea").html(gameHTML);
  	setTimeout(wait, 4000);  //  change to 4000 or other amount
  }

  function generateLoss() {
  	incorrectTally++;
  	gameHTML = "<p class='text-center timer-p'>Time Remaining: <span class='timer'>" + counter + "</span></p>" + "<p class='text-center'>Wrong! The correct answer is: "+ correctAnswers[questionCounter] + "</p>"
  	$(".mainArea").html(gameHTML);
  	setTimeout(wait, 4000); //  change to 4000 or other amount
  }

  function generateHTML() {
  	gameHTML = "<p class='text-center timer-p'>Time Remaining: <span class='timer'>30</span></p><p class='text-center'>" + questionArray[questionCounter] + "</p><p class='first-answer answer'>A. " + answerArray[questionCounter][0] + "</p><p class='answer'>B. "+answerArray[questionCounter][1]+"</p><p class='answer'>C. "+answerArray[questionCounter][2]+"</p><p class='answer'>D. "+answerArray[questionCounter][3]+"</p>";
  	$(".mainArea").html(gameHTML);
  }

  function wait() {
  	if (questionCounter < 7) {
  	questionCounter++;
  	generateHTML();
  	counter = 30;
  	timerWrapper();
  	}
  	else {
  		finalScreen();
  	}
  }

  function timerWrapper() {
  	theClock = setInterval(thirtySeconds, 1000);
  	function thirtySeconds() {
  		if (counter === 0) {
  			clearInterval(theClock);
  			generateLossDueToTimeOut();
  		}
  		if (counter > 0) {
  			counter--;
  		}
  		$(".timer").html(counter);
  	}
  }

  function finalScreen() {
  	gameHTML = "<p class='text-center timer-p'>Time Remaining: <span class='timer'>" + counter + "</span></p>" + "<p class='text-center'>All done, here's how you did!" + "</p>" + "<p class='summary-correct'>Correct Answers: " + correctTally + "</p>" + "<p>Wrong Answers: " + incorrectTally + "</p>" + "<p>Unanswered: " + unansweredTally + "</p>" + "<p class='text-center reset-button-container'><a class='btn btn-primary btn-lg btn-block reset-button' href='#' role='button'>Reset The Quiz!</a></p>";
  	$(".mainArea").html(gameHTML);
  }

  function resetGame() {
  	questionCounter = 0;
  	correctTally = 0;
  	incorrectTally = 0;
  	unansweredTally = 0;
  	counter = 30;
  	generateHTML();
  	timerWrapper();
  }





  </script>








</body>

</html>
